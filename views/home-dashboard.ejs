<%- include("includes/header") -%>

<%- include("includes/sidebar") -%>

<main>

  <div class="feed min-height container">

    <!-- FLASH MESSAGE -->
    <%- include("includes/flash") -%>

    <% if (posts.length) { %>
      <h2 class="text-center mb-4">What's New</h2>
      <div class="feed-list">
        <% posts.forEach(function(post) { %>
          <div class="feed-item">
            <div class="feed-item-header">
              <img class="avatar-feed" src="<%= post.author.avatar %>">
              <div class="user-details">
                <strong><%= post.title %></strong>
                <span class="text-muted small">by <a href="/post/<%= post.author.username %>" class="user-name"><%= post.author.username %></a> on <%= post.createdDate.getMonth() + 1 %>/<%= post.createdDate.getDate() %>/<%= post.createdDate.getFullYear() %></span>
              </div>
            </div>
            <p class="feed-body">
              <%= filterUserHTML(post.body) %>
            </p>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <div class="text-center">
        <h2>Hello <strong><%= user.username %></strong>, your feed is empty.</h2>
        <p class="lead text-muted">Your feed displays the latest posts from the people you follow. If you don&rsquo;t have any friends to follow that&rsquo;s okay; you can use the &ldquo;Search&rdquo; feature in the top menu bar to find content written by people with similar interests and then follow them.</p>
      </div>
    <% } %>
  </div>

</main>

<%- include("includes/footer") -%>